import { Injectable, Logger } from '@nestjs/common';
import { format } from 'date-fns';
import { ExtractionStrategy } from '../strategy.interface';
import { GrillAreaConfig, GrillAreaResult } from './grill-area.interface';

@Injectable()
export class MockGrillAreaStrategy implements ExtractionStrategy<GrillAreaResult> {
  private readonly logger: Logger = new Logger(MockGrillAreaStrategy.name);

  constructor(private readonly config: GrillAreaConfig) {}

  async run(): Promise<GrillAreaResult[]> {
    this.logger.log('Fetching mock data');

    const res = mockData
      .map((area) =>
        area.days.map((day) => ({
          id: area.id,
          area: area.id,
          day,
        })),
      )
      .flat()
      .filter(
        ({ id, day }) =>
          day >= new Date(this.config.from) && day <= new Date(this.config.to) && this.config.areas.includes(id),
      )
      .map(({ id, day, area }) => ({ id, day: format(day, 'yyyy-MM-dd'), area }));

    return res.map((res) => JSON.parse(JSON.stringify(res)));
  }
}

export const mockData = [
  {
    id: 0,
    days: [
      new Date('2022-10-10T22:00:00.000Z'),
      new Date('2022-10-11T22:00:00.000Z'),
      new Date('2022-10-18T22:00:00.000Z'),
      new Date('2022-10-19T22:00:00.000Z'),
      new Date('2022-10-23T22:00:00.000Z'),
      new Date('2022-12-23T22:00:00.000Z'),
      // new Date('2022-12-24T22:00:00.000Z'),
      new Date('2022-12-25T22:00:00.000Z'),
    ],
  },
  {
    id: 1,
    days: [
      new Date('2022-10-09T22:00:00.000Z'),
      new Date('2022-10-10T22:00:00.000Z'),
      new Date('2022-10-11T22:00:00.000Z'),
      new Date('2022-10-12T22:00:00.000Z'),
      new Date('2022-10-16T22:00:00.000Z'),
      new Date('2022-10-17T22:00:00.000Z'),
      new Date('2022-10-18T22:00:00.000Z'),
      new Date('2022-10-19T22:00:00.000Z'),
      new Date('2022-10-23T22:00:00.000Z'),
      new Date('2022-10-24T22:00:00.000Z'),
      new Date('2022-10-26T22:00:00.000Z'),
      new Date('2022-10-27T22:00:00.000Z'),
      new Date('2022-12-23T22:00:00.000Z'),
      new Date('2022-12-24T22:00:00.000Z'),
    ],
  },
  {
    id: 2,
    days: [
      new Date('2022-10-03T22:00:00.000Z'),
      new Date('2022-10-09T22:00:00.000Z'),
      new Date('2022-10-10T22:00:00.000Z'),
      new Date('2022-10-11T22:00:00.000Z'),
      new Date('2022-10-12T22:00:00.000Z'),
      new Date('2022-10-16T22:00:00.000Z'),
      new Date('2022-10-17T22:00:00.000Z'),
      new Date('2022-10-18T22:00:00.000Z'),
      new Date('2022-10-19T22:00:00.000Z'),
      new Date('2022-10-23T22:00:00.000Z'),
      new Date('2022-10-24T22:00:00.000Z'),
      new Date('2022-10-26T22:00:00.000Z'),
      new Date('2022-10-29T22:00:00.000Z'),
    ],
  },
  {
    id: 3,
    days: [
      new Date('2022-10-02T22:00:00.000Z'),
      new Date('2022-10-03T22:00:00.000Z'),
      new Date('2022-10-04T22:00:00.000Z'),
      new Date('2022-10-09T22:00:00.000Z'),
      new Date('2022-10-10T22:00:00.000Z'),
      new Date('2022-10-11T22:00:00.000Z'),
      new Date('2022-10-12T22:00:00.000Z'),
      new Date('2022-10-16T22:00:00.000Z'),
      new Date('2022-10-17T22:00:00.000Z'),
      new Date('2022-10-18T22:00:00.000Z'),
      new Date('2022-10-19T22:00:00.000Z'),
      new Date('2022-10-23T22:00:00.000Z'),
      new Date('2022-10-26T22:00:00.000Z'),
    ],
  },
  {
    id: 4,
    days: [
      new Date('2022-10-04T22:00:00.000Z'),
      new Date('2022-10-09T22:00:00.000Z'),
      new Date('2022-10-10T22:00:00.000Z'),
      new Date('2022-10-11T22:00:00.000Z'),
      new Date('2022-10-16T22:00:00.000Z'),
      new Date('2022-10-17T22:00:00.000Z'),
      new Date('2022-10-18T22:00:00.000Z'),
      new Date('2022-10-19T22:00:00.000Z'),
      new Date('2022-10-23T22:00:00.000Z'),
      new Date('2022-10-24T22:00:00.000Z'),
      new Date('2022-10-26T22:00:00.000Z'),
      new Date('2022-10-27T22:00:00.000Z'),
    ],
  },
  {
    id: 6,
    days: [
      new Date('2022-10-02T22:00:00.000Z'),
      new Date('2022-10-04T22:00:00.000Z'),
      new Date('2022-10-05T22:00:00.000Z'),
      new Date('2022-10-09T22:00:00.000Z'),
      new Date('2022-10-10T22:00:00.000Z'),
      new Date('2022-10-11T22:00:00.000Z'),
      new Date('2022-10-16T22:00:00.000Z'),
      new Date('2022-10-17T22:00:00.000Z'),
      new Date('2022-10-18T22:00:00.000Z'),
      new Date('2022-10-19T22:00:00.000Z'),
      new Date('2022-10-23T22:00:00.000Z'),
      new Date('2022-10-24T22:00:00.000Z'),
      new Date('2022-10-26T22:00:00.000Z'),
      new Date('2022-10-27T22:00:00.000Z'),
      new Date('2022-10-29T22:00:00.000Z'),
      new Date('2022-10-30T23:00:00.000Z'),
    ],
  },
  {
    id: 8,
    days: [
      new Date('2022-10-02T22:00:00.000Z'),
      new Date('2022-10-03T22:00:00.000Z'),
      new Date('2022-10-04T22:00:00.000Z'),
      new Date('2022-10-09T22:00:00.000Z'),
      new Date('2022-10-10T22:00:00.000Z'),
      new Date('2022-10-11T22:00:00.000Z'),
      new Date('2022-10-16T22:00:00.000Z'),
      new Date('2022-10-17T22:00:00.000Z'),
      new Date('2022-10-18T22:00:00.000Z'),
      new Date('2022-10-19T22:00:00.000Z'),
      new Date('2022-10-20T22:00:00.000Z'),
      new Date('2022-10-22T22:00:00.000Z'),
      new Date('2022-10-23T22:00:00.000Z'),
      new Date('2022-10-24T22:00:00.000Z'),
      new Date('2022-10-25T22:00:00.000Z'),
      new Date('2022-10-26T22:00:00.000Z'),
      new Date('2022-10-27T22:00:00.000Z'),
      new Date('2022-10-29T22:00:00.000Z'),
      new Date('2022-10-30T23:00:00.000Z'),
    ],
  },
  {
    id: 9,
    days: [
      new Date('2022-10-11T22:00:00.000Z'),
      new Date('2022-10-16T22:00:00.000Z'),
      new Date('2022-10-17T22:00:00.000Z'),
      new Date('2022-10-18T22:00:00.000Z'),
      new Date('2022-10-19T22:00:00.000Z'),
      new Date('2022-10-23T22:00:00.000Z'),
      new Date('2022-10-26T22:00:00.000Z'),
    ],
  },
  {
    id: 10,
    days: [
      new Date('2022-10-02T22:00:00.000Z'),
      new Date('2022-10-04T22:00:00.000Z'),
      new Date('2022-10-09T22:00:00.000Z'),
      new Date('2022-10-10T22:00:00.000Z'),
      new Date('2022-10-11T22:00:00.000Z'),
      new Date('2022-10-12T22:00:00.000Z'),
      new Date('2022-10-16T22:00:00.000Z'),
      new Date('2022-10-17T22:00:00.000Z'),
      new Date('2022-10-18T22:00:00.000Z'),
      new Date('2022-10-19T22:00:00.000Z'),
      new Date('2022-10-23T22:00:00.000Z'),
      new Date('2022-10-26T22:00:00.000Z'),
      new Date('2022-10-27T22:00:00.000Z'),
      new Date('2022-10-29T22:00:00.000Z'),
      new Date('2022-10-30T23:00:00.000Z'),
    ],
  },
  {
    id: 11,
    days: [
      new Date('2022-10-04T22:00:00.000Z'),
      new Date('2022-10-09T22:00:00.000Z'),
      new Date('2022-10-10T22:00:00.000Z'),
      new Date('2022-10-11T22:00:00.000Z'),
      new Date('2022-10-12T22:00:00.000Z'),
      new Date('2022-10-16T22:00:00.000Z'),
      new Date('2022-10-17T22:00:00.000Z'),
      new Date('2022-10-18T22:00:00.000Z'),
      new Date('2022-10-19T22:00:00.000Z'),
      new Date('2022-10-23T22:00:00.000Z'),
      new Date('2022-10-30T23:00:00.000Z'),
    ],
  },
  {
    id: 12,
    days: [
      new Date('2022-10-04T22:00:00.000Z'),
      new Date('2022-10-09T22:00:00.000Z'),
      new Date('2022-10-11T22:00:00.000Z'),
      new Date('2022-10-16T22:00:00.000Z'),
      new Date('2022-10-17T22:00:00.000Z'),
      new Date('2022-10-18T22:00:00.000Z'),
      new Date('2022-10-19T22:00:00.000Z'),
      new Date('2022-10-23T22:00:00.000Z'),
      new Date('2022-10-24T22:00:00.000Z'),
      new Date('2022-10-26T22:00:00.000Z'),
      new Date('2022-10-27T22:00:00.000Z'),
    ],
  },
  {
    id: 13,
    days: [
      new Date('2022-10-02T22:00:00.000Z'),
      new Date('2022-10-03T22:00:00.000Z'),
      new Date('2022-10-04T22:00:00.000Z'),
      new Date('2022-10-05T22:00:00.000Z'),
      new Date('2022-10-09T22:00:00.000Z'),
      new Date('2022-10-10T22:00:00.000Z'),
      new Date('2022-10-11T22:00:00.000Z'),
      new Date('2022-10-12T22:00:00.000Z'),
      new Date('2022-10-17T22:00:00.000Z'),
      new Date('2022-10-18T22:00:00.000Z'),
      new Date('2022-10-19T22:00:00.000Z'),
      new Date('2022-10-23T22:00:00.000Z'),
      new Date('2022-10-24T22:00:00.000Z'),
      new Date('2022-10-25T22:00:00.000Z'),
      new Date('2022-10-26T22:00:00.000Z'),
      new Date('2022-10-27T22:00:00.000Z'),
    ],
  },
  {
    id: 14,
    days: [
      new Date('2022-10-05T22:00:00.000Z'),
      new Date('2022-10-09T22:00:00.000Z'),
      new Date('2022-10-10T22:00:00.000Z'),
      new Date('2022-10-11T22:00:00.000Z'),
      new Date('2022-10-12T22:00:00.000Z'),
      new Date('2022-10-16T22:00:00.000Z'),
      new Date('2022-10-17T22:00:00.000Z'),
      new Date('2022-10-18T22:00:00.000Z'),
      new Date('2022-10-19T22:00:00.000Z'),
      new Date('2022-10-20T22:00:00.000Z'),
      new Date('2022-10-23T22:00:00.000Z'),
      new Date('2022-10-24T22:00:00.000Z'),
      new Date('2022-10-26T22:00:00.000Z'),
      new Date('2022-10-27T22:00:00.000Z'),
      new Date('2022-10-28T22:00:00.000Z'),
      new Date('2022-10-29T22:00:00.000Z'),
    ],
  },
  {
    id: 15,
    days: [
      new Date('2022-10-02T22:00:00.000Z'),
      new Date('2022-10-03T22:00:00.000Z'),
      new Date('2022-10-04T22:00:00.000Z'),
      new Date('2022-10-05T22:00:00.000Z'),
      new Date('2022-10-09T22:00:00.000Z'),
      new Date('2022-10-10T22:00:00.000Z'),
      new Date('2022-10-11T22:00:00.000Z'),
      new Date('2022-10-12T22:00:00.000Z'),
      new Date('2022-10-16T22:00:00.000Z'),
      new Date('2022-10-17T22:00:00.000Z'),
      new Date('2022-10-18T22:00:00.000Z'),
      new Date('2022-10-19T22:00:00.000Z'),
      new Date('2022-10-20T22:00:00.000Z'),
      new Date('2022-10-23T22:00:00.000Z'),
      new Date('2022-10-24T22:00:00.000Z'),
      new Date('2022-10-26T22:00:00.000Z'),
      new Date('2022-10-27T22:00:00.000Z'),
      new Date('2022-10-28T22:00:00.000Z'),
      new Date('2022-10-29T22:00:00.000Z'),
      new Date('2022-10-30T23:00:00.000Z'),
    ],
  },
  {
    id: 16,
    days: [
      new Date('2022-10-02T22:00:00.000Z'),
      new Date('2022-10-03T22:00:00.000Z'),
      new Date('2022-10-04T22:00:00.000Z'),
      new Date('2022-10-05T22:00:00.000Z'),
      new Date('2022-10-09T22:00:00.000Z'),
      new Date('2022-10-10T22:00:00.000Z'),
      new Date('2022-10-11T22:00:00.000Z'),
      new Date('2022-10-12T22:00:00.000Z'),
      new Date('2022-10-16T22:00:00.000Z'),
      new Date('2022-10-17T22:00:00.000Z'),
      new Date('2022-10-18T22:00:00.000Z'),
      new Date('2022-10-19T22:00:00.000Z'),
      new Date('2022-10-20T22:00:00.000Z'),
      new Date('2022-10-23T22:00:00.000Z'),
      new Date('2022-10-24T22:00:00.000Z'),
      new Date('2022-10-26T22:00:00.000Z'),
      new Date('2022-10-27T22:00:00.000Z'),
      new Date('2022-10-29T22:00:00.000Z'),
      new Date('2022-10-30T23:00:00.000Z'),
    ],
  },
];
